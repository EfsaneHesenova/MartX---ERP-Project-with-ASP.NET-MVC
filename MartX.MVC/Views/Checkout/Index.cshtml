@model CheckoutGetDto
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kasa Paneli</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2 class="text-center">Kasa Paneli</h2>
        <div class="row">
            <!-- Ürün Ekleme ve Listeleme Alanı -->
            <div class="col-md-8">
                <h4>Ürünler</h4>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Ürün Adı</th>
                            <th>Fiyat</th>
                            <th>Adet</th>
                            <th>Toplam</th>
                            <th>Sil</th>
                        </tr>
                    </thead>
                    <tbody id="productList">
                        @if (Model.CheckoutDto.Items is not null)
                        {
                            @foreach (var item in Model.CheckoutDto.Items)
                            {
                                <tr>
                                    <td>@item.Product.Title</td>
                                    <td>@item.Product.SalePrice</td>
                                    <td>@item.Quantity</td>
                                    <td>@(item.Quantity * item.Product.SalePrice)</td>
                                    <td><button class="btn btn-danger btn-sm" onclick="removeProduct(this)">Sil</button></td>
                                </tr>
                            }
                        }
                        else
                        {
                            <p>Empty</p>
                        }
                    </tbody>
                </table>
                <button class="btn btn-success w-100">Satışı Tamamla</button>
            </div>

            <!-- Ürün Ekleme Formu -->
            <div class="col-md-4">
                <h4>Ürün Ekle</h4>
                <form method="post">
                    <div class="mb-3">
                        <label class="form-label">Seçim Türü</label>
                        <div>
                            <input type="radio" name="selectionType" value="category" id="categoryRadio" checked>
                            <label for="categoryRadio">Kategoriye Göre</label>
                        </div>
                        <div>
                            <input type="radio" name="selectionType" value="brand" id="brandRadio">
                            <label for="brandRadio">Markaya Göre</label>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Seçim Yap</label>
                        <select id="selectionDropdown" class="form-select">
                            <option>Seçiniz</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Ürünler</label>
                        <select id="productDropdown" class="form-select">
                            <option>Önce seçim yapın</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Adet</label>
                        <input type="number" class="form-control" id="quantityInput" value="1" min="1" required>
                    </div>
                    <button type="button" class="btn btn-primary w-100" onclick="addProduct()">Ekle</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            loadSelectionOptions();
            document.querySelectorAll("input[name='selectionType']").forEach(radio => {
                radio.addEventListener("change", loadSelectionOptions);
            });
        });

        function loadSelectionOptions() {
            let dropdown = document.getElementById("selectionDropdown");
            dropdown.innerHTML = "<option>Seçiniz</option>";
            let selectionType = document.querySelector("input[name='selectionType']:checked").value;
            let options = selectionType === "category" ? @Html.Raw(Json.Serialize(Model.Categories)) : @Html.Raw(Json.Serialize(Model.Brands));
            options.forEach(opt => {
                let option = document.createElement("option");
                option.value = opt.Value;
                option.textContent = opt.Text;
                dropdown.appendChild(option);
            });
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
